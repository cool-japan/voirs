[package]
name = "voirs-feedback"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "Real-time feedback and interactive training system for VoiRS"
homepage.workspace = true
repository.workspace = true
keywords = ["speech", "tts", "feedback", "training", "ai"]
categories = ["multimedia::audio", "science", "accessibility"]

[dependencies]
# Core VoiRS dependencies
voirs-sdk = { path = "../voirs-sdk" }
voirs-recognizer = { path = "../voirs-recognizer" }
voirs-evaluation = { path = "../voirs-evaluation" }

# Async runtime
tokio = { version = "1.0", features = ["full"] }
async-trait = "0.1"

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Error handling
thiserror = "1.0"
anyhow = "1.0"

# Time and date
chrono = { version = "0.4", features = ["serde"] }

# Math and statistics
nalgebra = "0.32"
statrs = "0.16"

# Real-time features
crossbeam = "0.8"
futures = "0.3"
futures-util = "0.3"

# UI and visualization (optional)
egui = { version = "0.24", optional = true }
eframe = { version = "0.24", optional = true }
plotters = { version = "0.3", optional = true }

# Audio visualization
rustfft = "6.1"
hound = { version = "3.5", optional = true }

# Machine learning for adaptive feedback
candle-core = { workspace = true, optional = true }
candle-nn = { workspace = true, optional = true }

# Configuration management
config = "0.13"

# Logging
log = "0.4"
env_logger = "0.10"

# Collections and utilities
indexmap = "2.0"
uuid = { version = "1.0", features = ["v4", "serde"] }
rand = "0.8"

[features]
default = ["realtime", "adaptive", "progress-tracking"]

# Core features
realtime = []
adaptive = ["candle-core", "candle-nn"]
progress-tracking = []
gamification = []

# UI features
ui = ["egui", "eframe", "plotters"]
audio-export = ["hound"]

# All features
all-features = [
    "realtime", "adaptive", "progress-tracking", 
    "gamification", "ui", "audio-export"
]

[dev-dependencies]
tokio-test = "0.4"
criterion = "0.5"
tempfile = "3.8"

[package.metadata.docs.rs]
features = ["all-features"]
rustdoc-args = ["--cfg", "docsrs"]